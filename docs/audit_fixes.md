# Audit Fix Log

Tracks contract/flow changes made as a result of audit loops.

## Format
- Entry: `YYYY-MM-DD | Flow: ACF-### | Changes: ... | Files: ... | Lines: ... | Bundle: ... | Checkers: ... | Commit: ...`

## 2026-01-21
- Flow: ACF-002 | Changes: tighten Appendix A refs; add fail-closed missing instrument metadata + net-edge inputs; add RejectReasonCode `InstrumentMetadataMissing`/`NetEdgeInputMissing`; add AT-926/928/929/932/933/934 | Files: `specs/CONTRACT.md` | Lines: `specs/CONTRACT.md:332`, `specs/CONTRACT.md:351`, `specs/CONTRACT.md:384`, `specs/CONTRACT.md:391`, `specs/CONTRACT.md:684`, `specs/CONTRACT.md:710`, `specs/CONTRACT.md:774`, `specs/CONTRACT.md:846`, `specs/CONTRACT.md:1710`, `specs/CONTRACT.md:1715` | Bundle: `gpt/bundle_ACF-002.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-005 | Changes: add startup latch test AT-430; add §1.1.2 + Appendix A to flow refs; add AT-027/AT-342 to flow acceptance tests | Files: `specs/CONTRACT.md`, `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/CONTRACT.md:1638`, `specs/flows/ARCH_FLOWS.yaml:222`, `specs/flows/ARCH_FLOWS.yaml:226`, `specs/flows/ARCH_FLOWS.yaml:230`, `specs/flows/ARCH_FLOWS.yaml:231`, `specs/flows/ARCH_FLOWS.yaml:232` | Bundle: `gpt/bundle_ACF-005.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-006 | Changes: add §4.3.2 + Appendix A to flow refs; add replay gate, canary abort, review-loop, and F1_CERT binding/hash tests to acceptance list | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:282`, `specs/flows/ARCH_FLOWS.yaml:290`, `specs/flows/ARCH_FLOWS.yaml:296`, `specs/flows/ARCH_FLOWS.yaml:316` | Bundle: `gpt/bundle_ACF-006.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-006 | Changes: add §2.2.3 to flow refs; add AT-046 (TruthCapsule fail-closed) and AT-108 (drift -> ReduceOnly) | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:289`, `specs/flows/ARCH_FLOWS.yaml:297`, `specs/flows/ARCH_FLOWS.yaml:303` | Bundle: `gpt/bundle_ACF-006.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-006 | Changes: align canary abort cooldown with §7.1.4; add replay/canary abort tests AT-431/432/433/434/435/436 | Files: `specs/CONTRACT.md`, `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/CONTRACT.md:2870`, `specs/CONTRACT.md:2877`, `specs/CONTRACT.md:2910`, `specs/CONTRACT.md:2933`, `specs/CONTRACT.md:2954`, `specs/flows/ARCH_FLOWS.yaml:303`, `specs/flows/ARCH_FLOWS.yaml:312` | Bundle: `gpt/bundle_ACF-006.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-002/ACF-006 | Changes: move TruthCapsule/Decision Snapshot writer tests to ACF-002; add `depends_on` from ACF-006 to ACF-002; update flow checker to honor depends_on when evaluating shared section coverage | Files: `specs/flows/ARCH_FLOWS.yaml`, `scripts/check_arch_flows.py` | Lines: `specs/flows/ARCH_FLOWS.yaml:120`, `specs/flows/ARCH_FLOWS.yaml:252`, `scripts/check_arch_flows.py:24`, `scripts/check_arch_flows.py:149` | Bundle: `gpt/bundle_ACF-002.md`, `gpt/bundle_ACF-006.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-002 | Changes: add §4.3 to refs to cover TruthCapsule field linkage requirements | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:104` | Bundle: `gpt/bundle_ACF-002.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: checks | Changes: suppress invariants warning for `PHASE-1` flow (non-auditable) | Files: `scripts/check_arch_flows.py` | Lines: `scripts/check_arch_flows.py:176` | Bundle: n/a | Checkers: `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-002/ACF-003 | Changes: add Liquidity Gate + Net Edge tests to ACF-002; add depends_on to ACF-003; add required AtomicGroup/EmergencyClose/Appendix A tests to ACF-003 | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:128`, `specs/flows/ARCH_FLOWS.yaml:142`, `specs/flows/ARCH_FLOWS.yaml:172`, `specs/flows/ARCH_FLOWS.yaml:182` | Bundle: `gpt/bundle_ACF-002.md`, `gpt/bundle_ACF-003.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-001/ACF-004 | Changes: add AT-931 to ACF-001; add depends_on to ACF-004; add Kill/session/rate-limit tests to ACF-004 acceptance list | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:39`, `specs/flows/ARCH_FLOWS.yaml:196`, `specs/flows/ARCH_FLOWS.yaml:225` | Bundle: `gpt/bundle_ACF-001.md`, `gpt/bundle_ACF-004.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-001 | Changes: add dispatch authorization hot-path chokepoint rule; add AT-931 for dispatch-time TradingMode check | Files: `specs/CONTRACT.md` | Lines: `specs/CONTRACT.md:1414`, `specs/CONTRACT.md:1461` | Bundle: `gpt/bundle_ACF-001.md` | Checkers: `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-003 | Changes: require group intent persistence before leg dispatch; add AT-935/936; add emergency close price source fallback + `EmergencyCloseNoPrice` and AT-937/938; align LiquidityGate L2-missing path with §3.1 fallback | Files: `specs/CONTRACT.md` | Lines: `specs/CONTRACT.md:424`, `specs/CONTRACT.md:553`, `specs/CONTRACT.md:560`, `specs/CONTRACT.md:592`, `specs/CONTRACT.md:608`, `specs/CONTRACT.md:1713`, `specs/CONTRACT.md:2013`, `specs/CONTRACT.md:2067`, `specs/CONTRACT.md:2074` | Bundle: `gpt/bundle_ACF-003.md` | Checkers: `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-004 | Changes: update flow steps/refs to “Kill Mode Semantics” section | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:173`, `specs/flows/ARCH_FLOWS.yaml:176`, `specs/flows/ARCH_FLOWS.yaml:188` | Bundle: `gpt/bundle_ACF-004.md` | Checkers: `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-001 | Changes: drop §2.2 ref; add §2.2.2; expand acceptance_tests to cover §2.2.1/§2.2.1.1/§2.2.2/§2.3/§2.3.1/§2.3.2 required tests | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:25`, `specs/flows/ARCH_FLOWS.yaml:27`, `specs/flows/ARCH_FLOWS.yaml:33`, `specs/flows/ARCH_FLOWS.yaml:77` | Bundle: `gpt/bundle_ACF-001.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-003 | Changes: add Appendix A required tests AT-341/AT-040/AT-424 to acceptance list | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:221`, `specs/flows/ARCH_FLOWS.yaml:223` | Bundle: `gpt/bundle_ACF-003.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-005 | Changes: add Appendix A required tests AT-341/AT-040/AT-424 to acceptance list | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:308`, `specs/flows/ARCH_FLOWS.yaml:310` | Bundle: `gpt/bundle_ACF-005.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
- Flow: ACF-006 | Changes: add Appendix A required tests AT-341/AT-040/AT-424 to acceptance list | Files: `specs/flows/ARCH_FLOWS.yaml` | Lines: `specs/flows/ARCH_FLOWS.yaml:444`, `specs/flows/ARCH_FLOWS.yaml:446` | Bundle: `gpt/bundle_ACF-006.md` | Checkers: `scripts/check_contract_crossrefs.py`, `scripts/check_arch_flows.py` | Commit: n/a
